"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[3985],{3942:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"module-1-the-robotic-nervous-system/lesson-2-nodes-topics-services","title":"Lesson 2 - ROS 2 Nodes, Topics, and Services","description":"Understanding the communication patterns in ROS 2","source":"@site/docs/module-1-the-robotic-nervous-system/lesson-2-nodes-topics-services.md","sourceDirName":"module-1-the-robotic-nervous-system","slug":"/module-1-the-robotic-nervous-system/lesson-2-nodes-topics-services","permalink":"/Hackathon_1_By_Mussawir/docs/module-1-the-robotic-nervous-system/lesson-2-nodes-topics-services","draft":false,"unlisted":false,"editUrl":"https://github.com/mussawirsohail/Hackathon_1_By_Mussawir/docs/module-1-the-robotic-nervous-system/lesson-2-nodes-topics-services.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Lesson 2 - ROS 2 Nodes, Topics, and Services","sidebar_position":3,"description":"Understanding the communication patterns in ROS 2","learning_objectives":["Create and run ROS 2 nodes","Implement publisher-subscriber communication patterns","Create and use ROS 2 services","Debug communication between nodes"],"duration":150},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 1 - Introduction to ROS 2","permalink":"/Hackathon_1_By_Mussawir/docs/module-1-the-robotic-nervous-system/lesson-1-introduction-to-ros2"},"next":{"title":"Lesson 3 - Bridging Python Agents to ROS Controllers using rclpy","permalink":"/Hackathon_1_By_Mussawir/docs/module-1-the-robotic-nervous-system/lesson-3-bridging-python-agents"}}');var r=n(4848),o=n(8453);const t={title:"Lesson 2 - ROS 2 Nodes, Topics, and Services",sidebar_position:3,description:"Understanding the communication patterns in ROS 2",learning_objectives:["Create and run ROS 2 nodes","Implement publisher-subscriber communication patterns","Create and use ROS 2 services","Debug communication between nodes"],duration:150},c="Lesson 2 - ROS 2 Nodes, Topics, and Services",l={},a=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Nodes",id:"nodes",level:2},{value:"Creating a Node",id:"creating-a-node",level:3},{value:"Topics - Publisher-Subscriber Communication",id:"topics---publisher-subscriber-communication",level:2},{value:"Message Types",id:"message-types",level:3},{value:"Services - Request-Response Communication",id:"services---request-response-communication",level:2},{value:"Service Types",id:"service-types",level:3},{value:"Example: Simple Robot System",id:"example-simple-robot-system",level:2},{value:"Hands-On Exercise",id:"hands-on-exercise",level:2},{value:"Summary",id:"summary",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Self-Assessment",id:"self-assessment",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"lesson-2---ros-2-nodes-topics-and-services",children:"Lesson 2 - ROS 2 Nodes, Topics, and Services"})}),"\n",(0,r.jsx)(s.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(s.p,{children:"After completing this lesson, you will be able to:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Create and run ROS 2 nodes"}),"\n",(0,r.jsx)(s.li,{children:"Implement publisher-subscriber communication patterns"}),"\n",(0,r.jsx)(s.li,{children:"Create and use ROS 2 services"}),"\n",(0,r.jsx)(s.li,{children:"Debug communication between nodes"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(s.p,{children:"In ROS 2, nodes, topics, and services form the core communication infrastructure. Nodes are computational processes that perform work, while topics and services define how nodes communicate with each other. Understanding these concepts is essential for building distributed robotic applications."}),"\n",(0,r.jsx)(s.h2,{id:"nodes",children:"Nodes"}),"\n",(0,r.jsx)(s.p,{children:"Nodes are the fundamental building blocks of a ROS 2 system. They're processes that perform computation. In a typical robot system, you might have nodes for:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Sensor drivers"}),"\n",(0,r.jsx)(s.li,{children:"Control algorithms"}),"\n",(0,r.jsx)(s.li,{children:"Perception systems"}),"\n",(0,r.jsx)(s.li,{children:"Planning algorithms"}),"\n",(0,r.jsx)(s.li,{children:"User interfaces"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Nodes are implemented as programs written in languages that have ROS 2 client libraries (C++, Python, etc.)."}),"\n",(0,r.jsx)(s.h3,{id:"creating-a-node",children:"Creating a Node"}),"\n",(0,r.jsx)(s.p,{children:"A minimal ROS 2 node typically:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Initializes the ROS 2 client library"}),"\n",(0,r.jsx)(s.li,{children:"Creates a node object"}),"\n",(0,r.jsx)(s.li,{children:"Creates publishers, subscribers, or services"}),"\n",(0,r.jsx)(s.li,{children:"Spins (processes callbacks) or runs a loop"}),"\n",(0,r.jsx)(s.li,{children:"Cleans up when finished"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"topics---publisher-subscriber-communication",children:"Topics - Publisher-Subscriber Communication"}),"\n",(0,r.jsx)(s.p,{children:"Topics implement an asynchronous, many-to-many communication pattern. Multiple nodes can publish to the same topic, and multiple nodes can subscribe to the same topic. Messages are distributed to all subscribers."}),"\n",(0,r.jsx)(s.h3,{id:"message-types",children:"Message Types"}),"\n",(0,r.jsx)(s.p,{children:"All messages on a topic must be of the same type. ROS comes with standard message types, and users can define custom message types. Common message types include:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"std_msgs"})," - Basic types like integers, floats, strings"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"sensor_msgs"})," - Messages for sensors like cameras and LIDARs"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"geometry_msgs"})," - Messages for geometric data like positions and poses"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"services---request-response-communication",children:"Services - Request-Response Communication"}),"\n",(0,r.jsx)(s.p,{children:"Services implement synchronous, one-to-one communication. A client sends a request and waits for a response from the server. This is useful for tasks that require a specific response, such as saving a map or setting robot parameters."}),"\n",(0,r.jsx)(s.h3,{id:"service-types",children:"Service Types"}),"\n",(0,r.jsx)(s.p,{children:"Like topics, services use predefined message types that define the request and response structure. The client sends a request of one type and receives a response of another type."}),"\n",(0,r.jsx)(s.h2,{id:"example-simple-robot-system",children:"Example: Simple Robot System"}),"\n",(0,r.jsx)(s.p,{children:"Consider a simple robot with:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A sensor node that publishes laser scan data"}),"\n",(0,r.jsx)(s.li,{children:"A navigation node that subscribes to laser scans and publishes velocity commands"}),"\n",(0,r.jsx)(s.li,{children:"A control node that subscribes to velocity commands and drives the motors"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["The sensor node publishes to ",(0,r.jsx)(s.code,{children:"/scan"}),", the navigation node subscribes to ",(0,r.jsx)(s.code,{children:"/scan"})," and publishes to ",(0,r.jsx)(s.code,{children:"/cmd_vel"}),", and the control node subscribes to ",(0,r.jsx)(s.code,{children:"/cmd_vel"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"hands-on-exercise",children:"Hands-On Exercise"}),"\n",(0,r.jsx)(s.p,{children:"Implement a simple publisher-subscriber system:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Create a package for your examples (if not already done):"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python counter_tutorial\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Add a publisher node to ",(0,r.jsx)(s.code,{children:"counter_tutorial/counter_tutorial/counter_publisher.py"})," that publishes a counter message every second:"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Int64\n\n\nclass CounterPublisher(Node):\n\n    def __init__(self):\n        super().__init__('counter_publisher')\n        self.publisher_ = self.create_publisher(Int64, 'counter', 10)\n        timer_period = 1.0  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.counter = 0\n\n    def timer_callback(self):\n        msg = Int64()\n        msg.data = self.counter\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing counter: %d' % msg.data)\n        self.counter += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    counter_publisher = CounterPublisher()\n\n    rclpy.spin(counter_publisher)\n\n    counter_publisher.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"3",children:["\n",(0,r.jsxs)(s.li,{children:["Add a subscriber node to ",(0,r.jsx)(s.code,{children:"counter_tutorial/counter_tutorial/counter_subscriber.py"})," that subscribes to the counter topic:"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Int64\n\n\nclass CounterSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('counter_subscriber')\n        self.subscription = self.create_subscription(\n            Int64,\n            'counter',\n            self.counter_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def counter_callback(self, msg):\n        self.get_logger().info('Received counter: %d' % msg.data)\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    counter_subscriber = CounterSubscriber()\n\n    rclpy.spin(counter_subscriber)\n\n    counter_subscriber.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"4",children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Run both nodes in separate terminals:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 run counter_tutorial counter_publisher\nros2 run counter_tutorial counter_subscriber\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Use ",(0,r.jsx)(s.code,{children:"ros2 topic echo"})," to observe messages on the command line:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo /counter std_msgs/msg/Int64\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Observe the communication between nodes and how the counter value increments over time."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(s.p,{children:"Understanding nodes, topics, and services is crucial for designing robust ROS 2 systems. The publisher-subscriber pattern is ideal for sensor data and continuous control commands, while services are better for one-time requests and operations."}),"\n",(0,r.jsx)(s.h2,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Implementation Challenge"}),": Modify the counter publisher to publish a sequence of Fibonacci numbers instead of a simple counter. What challenges do you encounter when implementing this?"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Design Exercise"}),": Design a communication architecture for a mobile robot with the following capabilities: laser scanner, camera, wheel odometry, and velocity control. Specify the nodes, topics, and message types you would use."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Quality of Service (QoS) Exploration"}),": Research and experiment with different QoS profiles in ROS 2 (reliability, durability, etc.). How do these settings affect communication between nodes?"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Debugging Task"}),": Create a simple publisher-subscriber pair with a mismatch in message types or topic names to simulate a common communication error. How would you diagnose and fix this issue?"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"self-assessment",children:"Self-Assessment"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"What is the difference between a node, topic, and service?"}),"\n",(0,r.jsx)(s.li,{children:"How does the publisher-subscriber pattern work?"}),"\n",(0,r.jsx)(s.li,{children:"When would you use a service instead of a topic?"}),"\n",(0,r.jsx)(s.li,{children:"What are message types and why are they important?"}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>c});var i=n(6540);const r={},o=i.createContext(r);function t(e){const s=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);